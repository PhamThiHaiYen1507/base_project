import 'package:base_project/layers/domain/repositories/vulnerability_repository.dart';
import 'package:mobx/mobx.dart';

part 'vulnerability_progress_builder_controller.g.dart';

class VulnerabilityProgressBuilderController = _VulnerabilityProgressBuilderControllerBase
    with _$VulnerabilityProgressBuilderController;

abstract class _VulnerabilityProgressBuilderControllerBase with Store {
  final VulnerabilityRepository _vulnerabilityRepository;

  final String projectName;

  _VulnerabilityProgressBuilderControllerBase(
      this._vulnerabilityRepository, this.projectName) {
    _getProgress();
  }

  @observable
  Map<String, dynamic> progress = {};

  @action
  Future<void> _getProgress() async {
    final res = await _vulnerabilityRepository.getVulnProgress(projectName);
    res.map((right) {
      if (right != null) progress = right;
    });
  }
}
